## 01. 블록체인

### HASH(해시)
- 암호화 알고리즘 중 하나
- 특징
- 입력 값의 길이가 달라도 항상 고정된 길이의 해시값을 만들어 줌.
    - 입력 값이 아주 조금 달라지더라도 해시값은 완전히 달라짐
    - 1bit라도 변경되면 결과값이 전부 달라짐온
    - 단방향 알고리즘 → 해시값을 가지고 원본 데이터를 알아낼 수 없음
    - 같은 입력을 주면 항상 같은 해시값 출력
    - 해시 충돌 → 서로 다른 입력값에 대해 같은 출력값(해시값)이 나올 수 있음
- 종류 : SHA256, SHA512, md5, keccak256 등
- 사용 예시 : 무결성 검증, 패스워드 검사, 머클트리(Merkle tree)
<br>

### Merkle tree(머클트리)
- 이진 트리 형태의 자료구조
- 블록 안에 담겨 있는 트랜잭션 데이터를 해시값으로 변환
    → 해싱된 값을 두 개씩 짝지어서 해시값으로 변환
    → 이 과정을 하나의 해시값이 나올때까지 계속해서 반복
- 특징
    - SHA256 형태의 해시값
    - 32바이트의 크기를 갖음 → 머클루트만 블록체인에 기록!
    - 해당 트랜잭션 데이터의 존재 여부를 확인하고 찾을수 있음
    - 데이터의 위변조 검증 가능
- 용어
    - Leaf Node : 최하위 노드 → 트랜잭션 데이터의 해시값
    - Non-leaf Node(Merkle Branches) : 자식 노드들을 해싱한 해시값
    - Merkel Root(Root Hash) : 최상위 노드 → 최종적으로 나온 해시값
- Merkle Proof
    ![MerkleProof](https://miro.medium.com/v2/resize:fit:1200/1*gp9RaSxleAb3f9uZngpl3A.png)
    - Root Hash까지 계산하는데 필요한 해시값만 알고 있으면 됨!
    - 예시) H(K)에 대해서 검증하고 싶다! 
    → H(L), H(IJ), H(MNOP), H(ABCDEFG)만 알고 있으면 됨!
        1. H(K)와 H(L)을 해싱 → H(KL)
        2. H(KL)과 H(IJ)를 해싱 → H(IJKL)
        3. H(IJKL)과 H(MNOP)를 해싱 → H(IJKLMNOP)
        4. H(IJKLMNOP)와 H(ABCDEFGH)를 해싱 → H(ABCDEFGHIJKLMNOP)
        5. Root Hash인 H(ABCDEFGHIIJKLMNOP)가 블록체인에 기록된 값과 일치하는지 확인!
<br>

### Blockchain(블록체인)
- 분산화 된 데이터 저장 기술
- 의미
    - 저장 관점 → 분산 데이터베이스/원장
    - 네트워크 관점 → P2P
        - P2P(Peer to Peer)
            - 중앙 기관 없이 네트워크에 참여하고 있는 모든 사용자가 서로 간 데이터를 직접 주고 받을 수 있는 방식의 분산 네트워크
            - 서버/클라이언트가 정해져 있지 않음 → 각각의 사용자(컴퓨터)가 서버이자 클라이언트가 될 수 있는 양방향 네트워크
    - 경제적 관점 → 탈중앙화/민주화
- 블록체인 네트워크에서 발생한 거래 내역(트랜잭션)을 블록에 담음
→ 합의 알고리즘에 의해 합의된 블록만 체인 형태로 연결해서 저장
- 특징
    - 거래에 참여하고 있는 노드들이 모두 같은 데이터를 갖고 있음 
    → 위변조 불가능, 해킹이 어려움
    - 중앙 기관 없이 블록체인 네트워크에 참여하고 있는 각각의 노드들이 의사결정
    - 한 번 체인에 기록된 데이터는 수정/삭제가 불가능함
    - 데이터가 분산되어 저장되어 있기 때문에 한 노드에 문제가 발생하더라도 전체 시스템이 중단되지 않음
- 구조
    
    ![Untitled](https://i0.wp.com/blog.codestates.com/wp-content/uploads/2023/01/2301_%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8%EC%9D%98-%EA%B0%9C%EB%85%90-_-%EC%9D%B4%EB%8D%94%EB%A6%AC%EC%9B%80-%EB%B8%94%EB%A1%9D%EC%9D%98-%EA%B5%AC%EC%A1%B0-2.jpg?resize=750%2C320&ssl=1)
    ![Untitled](https://blog.kakaocdn.net/dn/SGGep/btq3hvwz2fe/tvu428XsjEHSkCHhbhxyk0/img.png)
    
    Reference : [블록체인과 비트코인 원리 이해하기3](https://m.blog.naver.com/samsjang/221152413245)
<br>

### Node(노드)
- 블록체인 네트워크에 참여하고 있는 서버(사용자)
- 블록체인는 탈중앙화 되어 있기 때문에 중앙 서버가 없고 여러 서버들이 연결되어 있음 
→ 이 서버들을 노드라고 함
- 종류
    ![Untitled](https://miro.medium.com/v2/resize:fit:2000/1*p2d4dCkRqhjpEATxalYwnw.png)
    
    - 풀노드(Full Node)
        - 검증에 필요한 블록체인 데이터를 가지고 있는 노드
        - 모든 블록과 트랜잭션의 유효성을 검증하여 체인을 형성함
        - 현재 블록체인의 유효성 여부를 검증할 수 있음
    - 라이트 노드(LightWeight Node)
        - 검증에 필요한 블록체인 데이터를 가지고 있는 노드
        - 풀노드와는 달리 블록 헤더의 유효성만을 검증해 체인을 형성함
        - 블록체인 상태의 일부나 특정 트랜잭션에 대해 검증할 수 있음
        - 용량이 작은 스마트폰이나 임베디드 디바이스에서 주로 사용함
    - 아카이브 노드(Archive Node)
        - 모든 블록체인 데이터를 가지고 있는 노드
        - 처음 블록부터 가장 최근에 생성된 블록까지 모든 블록체인 데이터를 가지고 있음
        - 과거의 데이터를 모두 보관하고 있다가 현재 노드에서 접근할 수 없는 과거의 노드에 대한 정보가 필요할 때 사용할 수 있음
        - 용량이 크기 때문에 큰 저장 공간이 필요함
<br>

### Fork (Soft vs Hard)
- 블록체인 네트워크가 두 개의 네트워크로 나눠짐
- 포크 발생시 체인에 참여하고 있는 사용자들이 다른 데이터를 보유할 수 있게 됨
- 발생 원인
    - PoW에서 두 명이 동시에 채굴에 생성했을 때
    - 서로 추구하는 것이 다를 때 → 집단의 선택이 마음에 들지 않음
    - 블록체인이 업데이트 될 때 → 새로운 기능 추가, 보안 패치 등
- 종류
    - Soft Fork
        - 이전 버전과 호환 가능
        - 쉽게, 게임이나 휴대폰 업데이트 한 느낌 (MS Office 2010 → MS Office 2013)
    - Hard Fork
        - 이전 버전과 호환 불가능
        - 쉽게, 아예 다른 블록체인이 만들어져서 분리된채로 계속 블록이 연결되는 것
<br>

## 02. 합의 알고리즘

### Consensus(합의)
- 여러 노드들이 의사결정을 하기 위해 사용하는 알고리즘
- 올바른 블록을 생성하기 위해 노드들끼리 새롭게 생성된 블록이 악의적인 블록인지 아닌지 등에 대해 합의하는 알고리즘
- 필요성
    - 탈중앙화 → 중앙화 된 서버가 의사결정하는 것이 아니라 다수의 참가자가 합의를 통해 의사결정을 하는 것이 필요함
    - 악의적인 사용자 존재 가능성
    - 시빌 공격(Sybil attack) → 실제로는 한 명이 사용자인데 마치 여러 명인 것처럼 한 사람이 여러 노드를 가지고 합의하려고 하는 것
- 종류 : PoW, PoS, DPoS, PBFT 등
<br>

### Finality(완결성, 불변성)
- 한 번 블록체인에 기록된 거래는 절대 되돌려질 수 없고 수정할 수 없다!
<br>

### Checkpoint
- checkpointrk 이루어진 다음에는 Finality 에 의해 수정/삭제 불가능
- 즉, checkpoint까지의 모든 트랜잭션은 유효하고 되돌릴 수 없음
- 체크포인트 이전 블록은 Fork 할 수 없음
<br>

### PoW(Proof of Work)
- 작업(work)을 증명하는 것
- 연산을 통해 블록체인 네트워크에 게시된 트랜잭션이 합법한 것인지 검증함
    
    → 가장 먼저 연산을 푼 사람이 블록을 생성하게 됨
    
    → 블록의 주인은 코인과 거래 수수료를 보상으로 받을 수 있음
    
- 컴퓨터 파워가 커질 수록 블록을 생성할 확률이 올라감
- 컴퓨터 자원을 많이 소모하기 때문에 컴퓨터 전력이 많이 들고, 환경 문제가 발생함 → PoS 등장!
- 51% attack
    - 블록체인 네트워크에서는 과반수에 따라 의사 결정이 진행됨
    - 공격자가 전체 연산량의 과반수 이상을 차지할 때 발생 가능함
    - 블록체인 노드들 중 과반수 이상(51%)이 악의적인 노드라면, 공격에 성공한다.
<br>

### Mining
- PoW에서의 Mining
    - 블록 헤더에 기록된 nonce 값을 1부터 증가시키면서 해싱하고, 해싱한 값이 목표값보다 작거나 같을 때 채굴 성공
    - 이 nonce 값을 찾아내는 것이 Mining
<br>

### MEV
- Maximal Extractable Value (최대로 추출 가능한 가치)
- 채굴자가 본인에게 유리한 방향으로 특정 트랜잭션을 포함하거나 제외, 순서 변경함으로서 얻을 수 있는 값
- 프론트러닝(Front-Running): 수익성 높은 트랜잭션(예: 아비트라지)이 멤풀에 포착될 경우 동일한 트랜잭션을 생성한 채 가스비만 더 높게 제출하여 기회를 가로채는 행위를 뜻한다.
- 백러닝(Back-Running): 프론트러닝과 반대로 타겟 트랜잭션 직후에 주문을 넣어 수익을 창출하는 행위이다. 거래 규모가 큰 트랜잭션에 의해 일시적으로 높은 슬리피지가 발생하면 MEV 봇이 그 즉시 반대 주문을 넣어 시세 차익을 챙기는 것이 백러닝의 대표적인 예시이다.
- 예시) A는 토큰을 100원에 매도하고, B는 토큰을 300원에 매수
    - 트랜잭션을 순서대로 처리하게 되면 A가 200원을 벌게 됨
    - 만약, 중간에 채굴자가 A에게 토큰을 100원에 매도해서 300원에 매수하면? 
    → A는 100원에 팔았는데 B는 300원에 사게 된 것! 
    → 채굴자가 200원을 벌게 되는 것
- 해결 : Flashbot
<br>

### Flashbot
- MEV로 발생할 수 있는 문제를 해결하기 위한 것!
- mempool에 아직 들어가지 않은 트랜잭션에 대해 네트워크 이용자가 가스비를 미리 채굴자에게 지불하는 것 (경매 느낌!)
<br>

### Mining pool
- 채굴자들이 모여서 같이 Mining하는 것
- PoW에서는 가장 먼저 문제를 푼 사람이 블록을 생성하고 이에 따른 보상을 얻게 되는데 문제 난이도가 점점 어려워지다보니까 혼자서 하기엔 채굴 성공률이 떨어짐
→ 혼자 하는 것보다 여러 명이 같이 하는게 채굴 성공률이 더 높지 않을까?
- 채굴 성공률을 더 높아지겠지만 채굴에 성공했을 때의 보상은 나눠가져야 됨
→ 채굴 능력이나 작업 비율 등에 따라 나눠가짐
<br>

### Nonce
- 정해져 있지 않은 랜덤 값
- PoW에서 채굴자들은 nonce 값을 하나씩 늘려가며 목표값을 찾음 → Brute force 방식
- nonce의 범위 : 32비트의 숫자(0~4294967295)

Reference : [블록체인 코어 시리즈: 작업증명(PoW)](https://medium.com/dnext-post/blockchain-core-series-pow-61227506a8c7)

<br>

### PoS(Proof of Stake)
![Untitled](https://static.upbitcare.com/3c379fea-17af-453c-a96a-57c09d20b38a.png)
- 지분(Stack)를 증명하는 것
- PoW와 달리 PoS에는 Validator가 있음
    - Validator가 되기 위해 일정량의 자산을 staking함
    - Validator는 블록 생성에 참여할 수 있음
    - 지분이 많을 수록 Validator가 될 확률이 높아짐
    - staking한 지분에 비례하게 보상 받음
- 정리하자면, 블록체인 네트워크에서 사용되는 자산을 더 많이 staking해야 블록에 기록할 수 있는 권한을 더 많이 부여받고, 블록이 생성되면 지분에 비례하게 보상
- 부정한 투표를 하게 되면 벌금을 내야 됨 → Slashing?
<br>

### Staking
- 블록체인 네트워크에 자산 맡기는 것
- 은행에 돈 맡겨 놓는 것과 비슷하게 이해하면 됨 (예금이랑 적금 섞인 느낌..?)
- 예치한 자산은 블록체인 네트워크 운영에 활용됨
- stacking 하는 대신 블록체인 네트워크 운영이나 검증에 참여하고 이에 따른 보상을 받음
- stacking 하면 그만큼 시장에 유통되는 수량이 줄기 때문에 코인 가격이 올라갈 수 있음
- stacking 하는 동안은 돈을 뺄 수 없음 → stacking 하는 동안 코인 가격이 떨어지면 손해
<br>

### Attestation
- 현재 상태에 대한 validator의 투표 → trasaction에 대한 사실 및 정확성 입증
- 매 ephoc마다 validator는 네트워크에 대한 증명을 제안하는 것
    - ephoc : 검증인들이 검증 작업을 하는 체크포인트의 블록 간격
    - ephoc의 특정 slot을 위한 것
- 목적 : 현재 ephoc의 가장 첫번째 블록과 가장 최근에 생성된 블록에 대한 validator의 의견
- validator의 의견이 결합되어 네트워크가 블록체인 상태에 대해 합의할 수 있도록 함
- 구성 요소
    - aggregation_bits : validator의 서명 여부(0과 1로 표현)
    - data : 증명과 관련된 세부 정보
    - signature : 각각의 validator의 서명을 합친 BLS 서명
- data가 작성되면 validator는 agreegation_bits를 1로 변경
- 이후 validator는 서명을 하고 네트워크에 broadcast
<br>

### Slashing
- PoS에서 Validator의 악의적인 행위를 방지하기 위한 것
    → 블록체인 네트워크가 원활하게 돌아가는데 방해하는 Validator한테 페널티
- 지분 금액의 일정 비율에 대해 벌금 부과
- 악의적인 행위
    - Downtime : 정해진 시간 안에 서명하지 않는 것
    - Double-Singing : 두 개의 다른 블록에 동시에 서명하는 것
<br>

### DPoS(Delegated Proof-of-Stake)
- 위임 지분 증명
- 노드들이 노드 대표를 투표로 뽑고 노드 대표한테 권한을 위임하는 것
- 블록체인 네트워크에 보유하고 있는 지분이 많을 수록 더 많이 투표할 수 있음
- PoS에서는 자산을 갖고 있는 모든 노드들이 참여했었는데 DPoS에서는 노드 대표들만 참여하니까 합의 시간이 짧아지고 비용이 줄어듦
<br>

### pBFT
- 비잔틴 장군 문제(Byzantine General Problem)
    
    ![Untitled](https://images.velog.io/images/gtfo/post/2333e597-3762-45f2-91de-2455090acee1/1_iSqZFIEzd_3z9q91VpsSxA.png)
    
    <blockquote>
    💡 분산된 환경에 있는 장군들이 서로 충성스러운 장군인지 악의적인 장군인지 알 수 없는 상태에서 전달자에 의해 전달되는 메시지를 통해 정상적으로 공격에 성공하기 위해서는 충성스러운 장군이 얼마나 있어야 하는가?
    </blockquote>
    
    - 모두 떨어져있고(분산된 환경) 통신 수단이 제한되어 있는 네 명의 장군이 성을 공격하는 상황
    - 장군들은 전달자에 의해 전달되는 메시지를 통해서만 소통할 수 있음
    - 충성스러운 장군은 사전에 협의된 대로만 행동할 것!
    - 악의적인 장군이라면 협의된 내용을 지키지 않거나 적과 내통할수도 있음
    - 메시지가 늦게 전달되거나 잘못 전달되는 경우에도 문제가 발생할 수 있음
    - 잘못된 메시지가 전달되거나, 악의적인 장군이 존재하더라도 성을 공격하는데 성공하기 위해서는 충성스러운 장군이 얼마나 있어야 할까?

- BFT(Byzantine Fault Tolerance)
    - 비잔틴 장군 문제를 해결하기 위한 것
    - 2/3 이상의 충성스러운 장군이 있어야 한다!
        → 과반수 이상의 노드를 확보하고 있어야 함
    - 블록체인 내에서 일부 노드가 고장나거나 악의적으로 행동해도 작동 가능함
    - 블록의 유효성 검사 → PoW, PoS

- pBFT(Practical byzantine Fault Tolerance)
    - Safety와 liveness를 일부 희생하면서 비동기 네트워크에서도 합의를 이룰 수 있음
        - Safety
            - 합의가 이루어진 이후, 어떤 노드가 접근하더라도 그 값은 동일
            - Finality와 유사
            - Safty가 보장되지 않을 경우, fork가 발생할 수 있음
        - Liveness
            - 일정 시간 안에 반드시 합의가 이루어져야 함
            - 합의 대상에 문제가 없으면 합의는 반드시 이루어짐
        - 동기/비동기 네트워크
            - 동기 네트워크 : 작업의 순서가 정해져있기 때문에 문제 발생시 다음 작업을 실행 할 수 없음 → timeout을 설정하여 일정 시간 안에 메시지가 도착하도록 보장
            - 비동기 네트워크 : 작업의 순서가 정해져 있지 않기 때문에 문제가 발생하더라도 다른 작업을 실행할 수 있음 → 문제가 발생한 메시지가 무한히 지연될 수 있음
    - 악의적인 노드가 1/3 미만일 경우에도 신뢰할 수 있음
    - 동작 원리
        ![Untitled](https://blog.kakaocdn.net/dn/3b2kI/btrb778k857/yNt0CiaZqndRrTYEzwjrt0/img.png)
        
        1. 클라이언트가 메시지(m)를 broadcast함
        2. primary node가 다른 노드들한테 메시지(Pre-prepare) 전달
            - 가장 먼저 메시지(m)를 받은 노드가 primary node!
        3. 다른 노드들은 받은 메시지(Pre-prepare)가 참인지 검증
        4. 참인 경우 다른 노드들에게 다시 메시지(Prepare)를 전달
        5. 수집한 메시지(Prepare)가 2f개 이상이면 “prepared certificate” 상태가 됨
            - f는 악의적인 노드의 갯수
        6. “prepared certificate” 상태를 만족한 노드는 다른 노드들에게 메시지(Commit)를 전달
        7. 수집한 메시지(Commit)이 2f개 이상이면 “commit certificate” 상태가 됨
        8. “commit certificate”가 되면 client가 요청한 메시지(m)에 따라 상태가 변화됨 → 합의 성공!

        <br>
        <blockquote>
        💡 Safty와 Liveness
        </blockquote>
        - Safty : 합의 성공시 client가 요청한 메시지(m)에 대해 모든 노드가 변화를 수용하였다고 판단<br>
        - Liveness 희생 : client가 요청한 메시지(m)에 대해 2f+1개 이상의 노드가 동의하지 않으면 체인에 올라갈 수 없음
        <br>
        
    - 장점
        - 2/3만 합의하면 검증 완료 → 속도 향상
        - 노드 수가 적어짐 → 보안에 유리함
<br>

### Mempool(Memory pool)
- 아직 블록에 들어가지 않은 상태의 트랜잭션이 대기하고 있는 임시 저장 공간
- 특징
    - 모든 노드들이 mempool을 가지고 있음
    - 블록체인 사용자는 누구든 볼 수 있음
    - 채굴자는 mempool에 있는 트랜잭션을 새롭게 생성할 블록에 포함시킴
    - mempool에서는 거래 수수료가 높은 애들 순서로 나감
    - 트랜잭션이 mempool에서 블록으로 이동하게 되면 mempooldptj 해당 트랜잭션이 삭제됨
- 동작 원리
    - 트랜잭션이 해당 블록체인 네트워크에 존재하는 노드들에게 전달됨
    - 각 노드들은 해당 트랜잭션에 대해 유효성 검증을 수행함
    - 검증된 트랜잭션들은 각 노드의 mempool에 업데이트 됨
    - 노드들 중 한 명이 채굴에 성공하면, mempool에 저장되어있는 트랜잭션을 넣어서 블록을 생성함
    - 생성된 블록들이 다른 노드들에게 전달하며 네트워크에 블록이 올라가게 됨
    - 채굴자가 포함시킨 트랜잭션은 다른 노드들의 mempool에서 삭제됨
    
    Reference : [비트코인 Mempools의 원리](https://moonsub.tistory.com/2)
<br>
        
### Chain re-organization
- 더 긴 체인이 생성되었을 때 다른 체인에 존재하는 블록을 제거할 때 발생
- Fork가 발생해서 체인이 두 개로 나뉘게 되었을 때 채굴자는 채굴할 블록을 선택할 수 있음
- 노드는 항상 가장 긴 체인을 유효한 체인으로 선택함
- 짧은 체인에 존재하는 블록(데이터)는 제거
<br>

## 03. 암호 화폐

### Bitcoin
- 최초의 암호화폐
- 블록체인을 이용하여 구현됨
- 특징
    - P2P방식 → 은행과 같은 제3기관의 없이 분산화 된 노드에 의해 개인 간의 거래가 가능함
    - 익명성 → 소유자에 대한 정보가 없음
    - 지갑주소형태로 저장됨 → 한 사용자가 여러 주소를 가지고 있을 수 있음
    - 화폐 단위 : BTC
<br>

### Altcoin(Alternative Coin)
- 비트코인을 대체할 수 있는 다른 코인을 의미함
- 종류 : 이더리움, 리플, 라이트코인, 모네로, 이오스 등
<br>

### Stablecoin
- 가격의 안정성을 보장하는 코인
- 암호화폐의 높은 가격 변동 문제를 해결하기 위해 개발함
- 가격이 달러나 파운드, 금 등 실물 자산에 고정되어 있음
- 실물 자산을 담보로 받고 토큰을 발행해주거나, 공급 자체를 제어하는 방식으로 가격을 stable하게 유지함
- 종류 : 테더, 스팀달러, 트루USD, 앵커토큰
<br>

## 04. 이더리움

### Ethereum
- 누구나 블록 체인 기술에서 실행되는 분산된 응용 프로그램을 만들고 사용할 수 있게 해주는 개방형 블록 체인 플랫폼
- 블록체인 기술을 기반으로 스마트 컨트랙트를 구현할 수 있도록 하는 분산 컴퓨팅 플랫폼
- 2013년 Vitalik Buterin씨가 제안함
- 비트코인과의 차이점
    - 단순히 거래를 기록하는 것이 아닌 컴퓨팅 기능을 추가하여 프로그램(스마트 컨트랙트)을 구현
    - 비트코인에는 참가자들의 거래 내역만 기록되지만, 이더리움은 거래내역 뿐만 아니라 스마트컨트랙트와 스마트컨트랙트를 이용하기 위한 데이터도 포함되어 기록됨
    - 비트코인은 거래에 대해 “했다/안했다” 두가지 상태로만 표현할 수 있지만 이더리움은 “거래중/입금확인/거래완료”등 거래 상태에 대해 더 세분화하여 표현할 수 있음
    - 비트코인은 지갑 주소만 존재하고 사용자에 대한 정보가 저장되지 않지만 이더리움은 지갑 주소 뿐만 아니라 계정과 관련된 모든 정보들도 저장됨
- Account
    - EOA(External Owned Accounts)
        - 일반적인 계정 유형
        - 계정의 주소를 통제할 수 있는 개인키가 존재함
        - 트랜잭션을 발생시키고, 다른 EOA/CA에 트랜잭션을 전송할 수 있음
        - ex) 메타마스크 계정 주소
    - CA(Contract Accounts)
        - 컨트랙트 코드에 의해 통제되는 계정
        - 컨트랙트를 네트워크에 배포할 때 생성됨
        - 개인키가 존재하지 않음
        - 트랜잭션을 발생시키지 못함
        - 
- 금융이나 게임, 예술 등 다양한 분야에서 많이 활용되고 있음
<br>

### Smart Contract
- 계약 당사자가 계약 내용이나 실행 조건 같은 것을 사전에 미리 협의를 해놓고 이 조건을 만족하는 경우 블록체인에서 자동적으로 계약이 이행되게끔 해주는 프로그램
- 스마트 컨트랙트를 실행할 경우 상태가 변화게 됨
- 중간에 중개해주는 사람이 필요 없음
- 이더리움에서 스마트 컨트랙트는 Solidity 언어로 프로그래밍됨
<br>

### EVM(Ethereum Virtual Machine)
- 스마트 컨트랙트를 돌릴 수 있는 가상의 프로그램
- 블록체인 네트워크에서는 모든 노드들이 동일한 정보를 가지고 있어야 함
→ 스마트 컨트랙트가 실행되어 상태가 업데이트 됐을 때 모든 노드들이 동일하게 업데이트 되어야 함
→ 같은 코드를 실행하더라도 실행 환경 등 다양한 요인으로 노드마다 다른 결과 값이 나올 수 있음
→ 이런 것을 방지하기 위해 각각의 노드들이 EVM이라는 가상 머신에서 스마트 컨트랙트를 실행시켜 모든 노드들이 동일한 상태로 업데이트 될 수 있도록 함
- Solidity → Bytecode → EVM
<br>

### Gas
- Solidity로 작성된 스마트 컨트랙트가 EVM에서 실행될 때 지불하는 수수료
- 블록을 생성한 채굴자들에게 보상으로 주는 개념
- 거래할 때마다 gas를 내야되서 무한 루프를 방지할 수 있음 (가스를 다 쓰면 실행을 못함)
<br>

## 05. DAPP 관련

### DApp(Decentralized Application)
- 블록체인을 기반으로 하는 탈중앙화 된 어플리케이션
- DApp은 Smart Contract를 실행할 수 있는 어플리케이션이고, Smart Contract는 DApp에서 돌아가는 실행 프로그램임.
- 특징
    - P2P 형식
    - 중앙 서버 대신 블록체인 네트워크를 사용하여 여러 컴퓨터에 정보를 나눠서 저장함
    - 모든 정보가 공개되고 기록되며 삭제가 불가능함
    - 오픈소스
    - 중앙집중화 방식의 어플리케이션과 달리 DApp은 암호화폐 토큰이 필요함
<br>

### DAO(Decentralized Autonomous Organization)
- 탈중앙화된 자율 조직
    → 중앙 기관 없이 개인들이 자율적으로 의사결정 하는 방식으로 운영되는 조직
- 동작 원리
    - 우선 중앙 기관이 없기 때문에 조직 내의 규칙 같은 것들을 스마트 컨트랙트로 구현해놓음
    - 이후 조직을 운영하기 위한 자금을 모아야 하기 때문에 토큰을 발행
    - 이 토큰은 조직에서 사용하거나 보상으로서 사용되고, 토큰에 투자한 사람은 투표권을 갖고 조직 운영에 영향을 끼칠 수 있음
    - 이러한 과정이 끝나면 완전히 자율적으로 독립하게 되고, 모든 내용들이 기록되고 공개됨
<br>

### DeFi
- 블록체인 기반의 탈중앙화 된 금융
- smart contract를 이용하여 블록체인에서 예금이나 대출, 보험 같은 금융 거래가 가능하도록 한 것
- 디지털 자산을 담보로 맡기고 다른 디지털 자산을 빌려는 방식으로 작동함
    → ETH를 맡기고 BTC 빌리기!
- ex) 대출 과정
    ![Untitled](https://bitcourier.co.uk/storage/photos/1/review/coinloan2.png)
1. Lender가 Defi 플랫폼에 이더(디지털 자산)을 맡김
2. Borrower는 테더(다른 디지털 자산)을 맡기고 이더를 빌려감
3. Borrower가 내는 이자랑 수수료는 Lender의 수익이 됨
<br>

### TVL(Total Valued Locked)
- 블록체인의 스마트 컨트랙트에 예치되어 락업되어 있는 총 자산
- Defi 플랫폼이나 Smart contract에 얼마나 많은 돈을 맡기고 있는지에 대한 것
- 맡기고 있는 동안 맡긴 돈은 찾아올 수 없음
- Defi 플랫폼을 평가하는 중요한 지표임
- TVL이 클수록 자산이 많다는 것을 의미함
→ 유동성 높음
→ 자산의 큰 변화 없이 거래할 수 있음
- TVL이 크면 swap이 자주 발생하고, 그만큼 유동성을 공급한 사용자가 받는 보상이 많아짐
<br>

### AMM(Automatic Market Maker)
- 자동화된 마켓 메이커
- AMM을 통해 환전(swap)이나 예치(stack) 등의 다양 금융을 할 수 있음
- 특징
    - DEX를 지원하는 프로토콜
    - 판매자와 구매자 사이에서 자동으로 가격을 형성시킴
        - 자산 가격을 산출하기 위한 공식이 있음 (x * y = k)
    - 유동성 풀이 높아야 됨
- 예시 : Uniswap, Curve, Balancer
<br>

### DEX(Decentralized Exchanged)
- 탈중앙화된 암호화폐 거래소
- 중개인 없이 smarcontract를 이용하여 거래할 수 있음
    - 상호 간의 거래 조건이 충족되면 성사
- 사용자가 직접 개인키를 가지고 있음
- 환전소 같은 느낌,,
<br>

### Liquidity pool
- DEX의 핵심기술!
- 스마트 컨트랙트 안에서 시장 참여자가 판매하거나 판매하려는 디지털자산의 양 → 코인 간의 교환을 위해 코인을 모아두는 곳
- 유동성(market liquidity) : 특정 자산의 가치에 영향을 끼치지 않으면서 해당 자산을 빠르고 쉽게 사고 팔 수 있는 것
    - 유동성이 높다는 것은 교환해줄 수 있는 코인이 많다는 것이고, 
    코인이 많으면 사람들이 거래하는게 쉬워지고, 
    거래가 쉬워지면 더 많은 사람들이 거래하게 됨
<br>

### Yield Farming
- Liquidity pool에 유동성을 공급한 사용자에게 그 대가로 코인/수수료를 보상으로 제공하는 것
    - 유동성 공급자(Liquidity Provider, LP) : 토큰을 Liquidity pool에 맡기는 사람
- AMM의 자체 코인으로 보상 제공
<br>

### Uniswap
- 탈중앙화 된 가상자산 거래소(DEX)
- 이더리움과 ERC-20 토큰 간의 자동 교환 거래를 용이하게 하도록 하는 프로토콜
    - ERC-20 토큰
        - 이더리움 네트워크에서 스마트 컨트랙트를 이용하여 발행된 토큰
        - 필수 규칙(필수로 사용해야 하는 함수) → 이 조건을 만족하면 화폐가치를 하는 토큰을 만들어 낼 수 있다!
- 교환 비율이 자동적으로 정해지게 되어 있음 → CPMM
    - CPMM(Constant Product Market Maker)
        - 어떤 곱이 항상 동일하게 유지되는 모델
        - x * y = k
        - 이 때, x는 토큰 A의 수량, y는 토큰 B의 수량이며 k는 항상 고정된 상수
<br>

### Governance
- 블록체인 네트워크 유지를 위한 구성원들간의 자율적인 의사 결정을 하기 위한 것
    - 여기서 구성원은 해당 네트워크에 코인을 보유하고 있는 투자자
- 각 구성원들이 자신의 이익을 대변하고, 이에 대해 서로 협의하는 과정
- 주로 투표를 통해 협의가 진행됨
- ex) 주주총회
<br>

### MakerDAO
- 이더리움 블록체인에 구축된 분산형 대출 플랫폼
- 특징
    - 암호화폐를 담보로 운용
    - 스마트 컨트랙트를 이용하여 중간 관리자가 없음
    - 코인 : DAI
        - Stablecoin 방식
        - 미국 달러의 가치를 반영하도록 설계됨
<br>

## 06. 경제
### Subprime mortgage
- Subprime mortage
    - Subprime : 봉급이 일정하지 않거나 자산이 일정수준 이하인 신용도 낮은 사람
    - 신용등급이 낮은 사람이 주택 담보 대출을 무리하게 했다가 이를 갚지 못하고  사건이 연쇄적으로 발생한 전세계적 금융 위기
- 사건 요약
    1. 2000년대초 미국은 IT버블붕괴, 911테러, 이라크 전쟁 등으로 경기가 매우 침체된 상태였음
    2. 미국 정부에서 경기를 부양시키기 위해 초저금리 정책을 시행하며 주택소유장려정책을 펼침
    3. 부동산에 대한 수요가 증가하며 부동산 가격이 급등함
    4. 당시 전세계 금융회사에서 주택저당증권이라는 투자 상품을 내놓음
        - 주택저당증권(MBS)
            ![Untitled](https://blog.kakaocdn.net/dn/EWtR6/btqEFJF8p21/w4OjDPuTnDgB2pc4JYHLzk/img.png)
            - 금융기관에서 주택 소유자에게 주택을 담보로 구입자금을 대출해주면 주택저당채권을 갖게 됨
            - 금융기관에서는 이를 주택금융공사에 팔고, 주택금융공사는 주택 저당 채권을 담보로 하는 MBS를 발행하여 투자자들에게 판매
            - 투자자들에 제공한 돈을 금융기관를 통해 주택 소유자에게 돈 지급
    5. 더 많은 MBS를 발행하기 위해 대출 고객층을 subprime까지 확장시켜 주택담보대출을 승인해주게 됨
    6. CDO, CDS 등 다양한 증권 상품을 만들어 다른 투자자들에게 판매함
        - 부채담보부증권(CDO)
            - 투자자들이 여러 MBS를 모아서 만든 증권상품
            - 담보가 되는 자산이 채권으로만 구성되어 있음
            - 투자자들도 CDO를 발행하여 다른 투자자들에게 판매할 수 있음
    7. 주택 가격 폭등을 막기 위해 저금리정책을 종료하고 금리를 인상시킴
    8. subprime의 주택담보대출 연체율 증가 (채무 불이행)
        - 애초에 원금상환능력이 부족했음에도 불구하고 무차별적으로 대출을 해준 것
    9. MBS와 CDO를 발행한 금융회사에 파산 및 경제 침체 발생
<br>

### CBDC(Central Bank Digital Currency)
- 중앙은행에서 직접 발행하고 관리하는 디지털 화폐
- 특징
    
    ![Untitled](https://www.2e.co.kr/news/photo/202012/301051_3760_1541.jpg)
    
    - 법정화폐와 동일한 가치를 가짐
        - 중앙 은행에서 발행한 종이 화폐를 디지털화 한 느낌!
    - 법정화폐와 1:1로 교환 가능함
    - 블록체인 기술 이용
    - 중개기관이 없음
        - 화폐를 발행하는데 상업은행을 거치지 않고 중앙 은행에서 바로 발행
        - 송신자와 수신자 간에 직접적인 거래가 가능함
        - 중개 수수료가 발생하지 않음
- 장점
    - 중앙은행이 개인 자산을 디지털 지갑을 통해 관리 → 안전
    - 화폐 발행/폐기 비용 절감
    - 투명성 → 불법 거래 추적이 용이함, 탈세 방지 등
<br>

### CFTC(Commodity Futures Trading Commission)
- 미국의 상품선물거래위원회(미국의 정부 독립 기관)
- 상품 선물, 옵션 시장, 스왑 시장을 규제
    - 암호화폐 선물
        - 일정 시간에 일정 금액의 암호 화폐의 자산을 사고 파는 두 당사자간의 계약
        - 해당 코인에 미래 가치를 현재 시점에 구매하는 것
    - 암호화폐 옵션
        - 기본 자산을 정해진 가격으로 사고 팔 수 있지만 이에 대한 의무는 없음
- 목표
    - 경쟁적이고 효율적인 선물 시장 유지
    - 부정적인 경제적 조작 및 사기 방지
- Bakkt이나 ErisX와 같은 선물 거래 심사
    - Bakkt, ErisX : 암호화폐 선물 거래소
<br>

## 07. 기타

### Tornado Cash
- 이더리움을 대상으로 구축된 가상화폐 믹서 플랫폼
    - 믹서 : 디지털 자산을 쪼개서 전송 출처를 알 수 없도록 하는 것 → 자금 및 거래 추적의 어려움
    - 이 과정을 반복할 경우 자금 추적 및 사용처, 현금화 여부 등 가상 화폐 거래 추적이 어려워짐
- 특징
    - 영지식증명(Zero-Knowledge Proof) 기반
    - 사용자의 신원과 개인정보 보호 → 익명성 보장
    - 송신자와 수신자 사이의 온체인 링크를 차단함 → 추적 불가능
        - 온체인 : 블록체인에서 발생하는 모든 거래 내역(트랜잭션)을 블록체인에 기록하는 것
        - 오프체인 : 블록체인 외부에서 발생하는 외부 거래 내역을 블록체인에 기록하는 방식
<br>

### Testnet vs Mainnet
- Testnet → Mainnet
- Testnet
    - 메인넷을 운용하기 전 여러 테스트를 통해 성능을 모니터링하고, 부족한 부분은 보완하거나 추가적인 개발을 진행
    - 메인넷 출시 전 베타 테스트 느낌
    - 메인넷 출시 이후에도 테스트 환경이 필요할 때 사용하기도 함
    - 트랜잭션, 토큰 등이 아무런 가치가 없음
- Mainnet
    - 블록체인 프로젝트를 실제로 운영하는 네트워크
        
        → 실제 사용자에게 배포되는 블록체인 네트워크
        
    - 자체적으로 독립된 네트워크를 가지고 있을 수 있음
    - Mainnet을 기반으로 다양한 DApp을 만들 수 있음
    - coin 형태의 암호화폐 발행
<br>

### Zero Knowledge Proof(영지식 증명)
- 상대방에게 아무 정보도 공개하지 않고, 해당 정보를 가지고 있다는 사실을 증명하는 것
- 3가지 조건
    - 완전성 : 어떤 조건이 참이라면 검증자는 증명자에 의해 이 사실을 납득할 수 있어야 함
    - 건전성 : 어떤 조건이 거짓이라면 증명자는 거짓말로 검증자를 납득시킬 수 없음 → 계속 반복하다보면 언젠간 실패
    - 영지식성 : 어떤 조건이 참이라면, 이에 대해 오직 증명자와 검증자만이 사실을 확신할 수 있음
- 알리바바 동굴
    
    ![Untitled](https://cdn.coindeskkorea.com//news/photo/202205/79339_21429_133.png)
    
    - 증명자 P는 검증자 V에게 본인이 열쇠를 가지고 있다는 것을 증명하고 싶은데 자신의 비밀이 알려지는 것은 싫음!
    - 검증 과정
        1. V는 동굴 밖에서 기다리고, P는 A와 B 중 아무 곳으로 들어감
            - 이 때, V는 동굴 밖에 있어서 P가 어디로 갔는지 알 수 없음
        2. V가 동굴 안으로 들어와 A/B 중에 아무거나 선택
        3. P는 V가 선택한 쪽으로 나오면 됨
    - 열쇠가 있으면 V가 어느 쪽을 선택해도 V가 선택한 쪽으로 나올 수 있음
    - 이 과정을 계속 반복하면 P는 본인이 열쇠를 가지고 있다는 것을 증명할 수 있음
- 블록체인에서의 영지식 증명 사용 사례
    - 제로 코인
    - 프라이버시 코인
    - ZCash
    - 거래의 익명화 → CBDC
    - Tornado Cash
<br>

### Layer1 vs. Layer2
![Untitled](https://static.upbitcare.com/5a6772e3-313f-4dba-9b0a-c6ac885272cb.png)

- Layer0(L0)
    - L1 아래에서 실행되는 블록체인 인프라 역할
    - 다른 네트워크와 데이터를 주고 받거나 소통할 수 있음
    - ex : 코스모스, 폴카닷
- Layer1(L1)
    - 가장 기본이 되는 네트워크
    - 다른 네트워크에 영향을 받지 않는 독립적인 네트워크
    - 탈중앙화 된 블록체인은 주로 탈중앙성과 보안성을 확보했지만 이에 따른 확장성은 떨어짐 → 블록체인의 트릴레마
    - 트랜잭션 속도가 느림
    - 블록의 용량이 한정적 → 처리 가능 수량이 제한적
    - ex : 이더리움, 바이낸스체인, 솔라나 등
- Layer2(L2)
    - L1을 기반으로 작동하는 네트워크
    - L1의 문제를 보완하고자 만들어짐 → 확장성 제공
    - 오프체인 솔루션
        - 오프체인 : 블록체인 외부에서 발생하는 외부 거래 내역을 블록체인에 기록하는 방식
    - 트랜잭션 속도의 한계 극복
        - 실제로 트랜잭션을 처리
        - 블록체인 외부에서 트랜잭션을 생성하고 처리한 다음 이를 압축한 값만 L1에 저장
    - 수수료가 낮음
    - ex : 폴리곤, 옵티미즘, 아비트럼 등
- Layer3(L3)
    - L2를 기반으로 작동하는 어플리케이션 Layer
    - 유저가 실제로 사용하는 DApp
    - ex : 유니스왑, 메이커다오 등
<br>

## 레퍼런스
- [Blockchain - Wikipedia](https://en.wikipedia.org/wiki/Blockchain)
- [Blockchain Facts: What Is It, How It Works, and How It Can Be Used](https://www.investopedia.com/terms/b/blockchain.asp)
- [리먼브라더스 사태, 블록체인을 낳다](https://brunch.co.kr/@jonathanfeel/63)
- [yuri lee 🇰🇷 on Twitter: "WTF is Web 3.0? A thread🧵" / Twitter](https://twitter.com/codingyuri/status/1443183971127410694)
- [Why Web 3 matters](https://threadreaderapp.com/thread/1442201621266534402.html)
- [Crypto Canon | Andreessen Horowitz](https://a16z.com/2018/02/10/crypto-readings-resources/)
- [Resources from a16z for Understanding Crypto | Andreessen Horowitz](https://a16z.com/2020/04/30/explaining-crypto-from-a16z/)
- [DeFi란 무엇인가](https://brunch.co.kr/@miho0429/52)
- [Merkling in Ethereum](https://blog.ethereum.org/2015/11/15/merkling-in-ethereum/)
- [Finematics - YouTube](https://www.youtube.com/c/Finematics)
- [안수빈의 블로그](https://ansubin.com/)
- [Whiteboard Crypto](https://www.youtube.com/c/WhiteboardCrypto)
- https://medium.com/decipher-media/decipher-stablecoin-series-e777ec2068d2
